<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-type" content="text/html;charset=utf-8">
  <link rel="stylesheet" type="text/css" href="../public/css/gollum.css" media="all">
  <link rel="stylesheet" type="text/css" href="../public/css/editor.css" media="all">
  <link rel="stylesheet" type="text/css" href="../public/css/dialog.css" media="all">
  <link rel="stylesheet" type="text/css" href="../public/css/template.css" media="all">
  
  <!--[if IE 7]>
  <link rel="stylesheet" type="text/css" href="../public/css/ie7.css" media="all">
  <![endif]-->
  
  <script type="text/javascript" src="../public/css/jquery.js"></script>
  <script type="text/javascript" src="../public/css/gollum.js"></script>
  <script type="text/javascript" src="../public/css/gollum.dialog.js"></script>
  <script type="text/javascript" src="../public/css/gollum.placeholder.js"></script>
  
  <script type="text/javascript" 
    src="../public/css/editor/gollum.editor.js"></script>
  <title>Graph Indices</title>
</head>
<body>

<div id="wiki-wrapper" class="page">
<div id="head">
<div><a href="../index.html">TinkerPop</a> - <a href="Home.html">Blueprints</a></div>
  <h1>Graph Indices</h1>
  <ul class="actions">
    <li class="minibutton"><a href="/pages"
      class="action-all-pages">All Pages</a></li>
    <li class="minibutton" class="jaws">
      <a href="#" id="minibutton-new-page">New Page</a></li>
    <li class="minibutton"><a href="/edit/Graph-Indices"
       class="action-edit-page">Edit Page</a></li>
    <li class="minibutton"><a href="/history/Graph-Indices"
       class="action-page-history">Page History</a></li>
  </ul>
  <div id="searchbar">
    <form action="/search" method="get" id="search-form">
    <div id="searchbar-fauxtext">
      <input type="text" name="q" id="search-query" value="Search&hellip;" autocomplete="off">
      <a href="#" id="search-submit" title="Search this wiki">
        <span>Search</span>
      </a>
    </div>
    </form>
  </div></div>
<div id="wiki-content">
  <div class="wrap">
  <div id="wiki-body" class="gollum-textile-content">
    <div id="template">
      <p><img src="https://github.com/tinkerpop/blueprints/raw/master/doc/images/indices-example.png" alt="" /></p>
<p>An <code>IndexableGraph</code> is a <code>Graph</code> that supports the indexing of its vertices and edges. An index is a data structure that allows for the fast retrieval of an element by a particular key/value pair. The <code>IndexableGraph</code> interface has the following methods:</p>
<pre><code>public &lt;T extends Element&gt; Index&lt;T&gt; createAutomaticIndex(String indexName, Class&lt;T&gt; indexClass, Set&lt;String&gt; indexKeys, Parameter... indexParameters);
public &lt;T extends Element&gt; Index&lt;T&gt; createManualIndex(String indexName, Class&lt;T&gt; indexClass, Parameter... indexParameters);
public &lt;T extends Element&gt; Index&lt;T&gt; getIndex(String indexName, Class&lt;T&gt; indexClass);
public Iterable&lt;Index&lt;? extends Element&gt;&gt; getIndices();
public void dropIndex(String indexName);</code></pre>
<h2>Manual Indices</h2>
<p>There are two types of indices: <code>Type.AUTOMATIC</code> and <code>Type.MANUAL</code>. A manual index requires the developer to manually put, get, and remove elements from the index. To create a manual index of vertices, do the following:</p>
<pre><code>Index&lt;Vertex&gt; index = graph.createManualIndex("test-idx", Vertex.class);</code></pre>
<p>The <code>Index</code> interface has the following methods:</p>
<pre><code>public long count(String key, Object value);
public String getIndexName();
public Class&lt;T&gt; getIndexClass();
public Type getIndexType();
public void put(String key, Object value, T element);
public Iterable&lt;T&gt; get(String key, Object value);
public void remove(String key, Object value, T element);</code></pre>
<p>Given the <code>index</code> object created previous, to add, query, and remove a vertex from this index, do the following:</p>
<pre><code>index.put("name","peter",vertex);
Iterable&lt;Vertex&gt; results = index.get("name","peter");
index.remove("name","peter",vertex);</code></pre>
<p>With manual indices, the developer must be cognizant of maintaining the index with these methods.</p>
<h2>Automatic Indices</h2>
<p>When the developer does not wish to maintain an index, the developer can rely on indices of <code>Type.AUTOMATIC</code>. An automatic index will automatically <code>put</code> and <code>remove</code> elements from an index as the element mutates. That is, an automatic index indexes the properties of an element where the property key is the key and the property value is the value. As these properties change, an automatic index automatically reflects these changes. To create an automatic index, do the following:</p>
<pre><code>Set&lt;String&gt; indexKeys = ...
AutomaticIndex&lt;Vertex&gt; autoIndex = graph.createAutomaticIndex("test-aidx", Vertex.class, indexKeys);</code></pre>
<p>The <code>AutomaticIndex</code> interface extends <code>Index</code> and provides, along with the <code>Index</code> methods, the following method:</p>
<pre><code>public Set&lt;String&gt; getAutoIndexKeys();</code></pre>
<p>An <code>AutomaticIndex</code> will index all newly created elements by the provide set of auto index keys. If this set of auto index keys is <code>null</code>, then all keys will be indexed. Here is an example of all this together:</p>
<pre><code>Set&lt;String&gt; indexKeys = new HashSet&lt;String&gt;();
indexKeys.add("name");
AutomaticIndex&lt;Vertex&gt; autoIndex = graph.createAutomaticIndex("test-aidx", Vertex.class, indexKeys);
Vertex a = graph.addVertex(null);
a.setProperty("name","pavel");
a.setProperty("country","belarus");
Iterable&lt;Vertex&gt; results = autoIndex.get("name","pavel");
// results contains vertex a
results = autoIndex.get("country","belarus");
// results does not contain vertex a</code></pre>
<p><strong>Note</strong>: When an <code>IndexableGraph</code> is created a new (not constructed, but when there is no historic persistence), it comes with two automatic indices named <code>Index.VERTICES</code> and <code>Index.EDGES</code> that index all properties (constructed with <code>null</code> indexKeys argument). These indices automatically index any created vertices and edges, respectively. If these indices are not desired, simply <code>graph.dropIndex(Index.VERTICES)</code> and <code>graph.dropIndex(Index.EDGES)</code> before adding elements.</p>
<h2>Index Parameters</h2>
<p>The two index construction methods, <code>createManualIndex()</code> and <code>createdAutomaticIndex()</code>, have a <code>Parameter</code> &#x201C;var arg&#x201D; as their final argument. Some underlying graph implementations support the passing of parameters to tweak the underlying indexing model &#x2014; e.g. case insensitive querying. Please refer to the specifics of each <code>IndexableGraph</code> implementation for their respective support parameters.</p>
    </div>
  </div>
  </div>

</div>
<div id="footer">
  <p id="last-edit">Last edited by <b>joshsh</b>, 2012-05-02 17:53:34</p>
</div>
</div>

<script type="text/javascript" src="../public/css/MathJax/MathJax.js"></script>


</body>
</html>
